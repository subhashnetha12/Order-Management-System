{% extends 'company_admin/base.html' %}
{% load static %}
{% block content %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile</title>
    <style>
        :root {
            --primary-red: #601F2F;
            --primary-orange: #ffb347;
            --accent-yellow: #fc3;
            --light-orange: #fff5e6;
            --dark-red: #4a1824;
        }
        
        body {
            background: var(--light-orange);
            color: var(--primary-red);
        }
        
        .bg-primary-red {
            background-color: var(--primary-red) !important;
        }
        
        .btn-primary {
            background-color: var(--primary-red);
            border-color: var(--dark-red);
        }
        
        .btn-primary:hover {
            background-color: var(--dark-red);
            border-color: var(--primary-red);
        }
        
        .card {
            border-radius: 10px;
            border: 1px solid var(--primary-orange);
        }
        
        .form-control-plaintext {
            color: var(--primary-red);
            padding: 0.375rem 0;
        }
        .profile-card{
            max-width: 600px;
            /* margin: 40px auto; */
            /* padding: 30px; */
        
        }

        
        @media (max-width: 576px) {
            .col-form-label {
                text-align: left !important;
                padding-bottom: 0;
            }
        }
    </style>
</head>
<body>

<div class="container py-2">
    <div class="row justify-content-center">
        <div class="col-lg-8">

            <div class="card shadow-lg border-0">
                <div class="card-header bg-primary-red text-white">
                    <div class="d-flex justify-content-between align-items-center">
                        <h2 class="mb-0">User Profile</h2>
                        <button type="button" id="editProfileBtn" class="btn btn-sm btn-outline-light">
                            <i class="bi bi-pencil-square"></i> Edit Profile
                        </button>
                    </div>
                </div>
                <div class="card-body">
                    <form id="profileForm" method="POST" action="{% url 'profile' %}">
                        {% csrf_token %}

                        <!-- Username -->
                        <div class="row mb-2">
                            <label class="col-sm-4 col-form-label fw-bold">Username</label>
                            <div class="col-sm-8">
                                <span class="form-control-plaintext">{{ current_user.username }}</span>
                            </div>
                        </div>

                        <!-- Role -->
                        <div class="row mb-2">
                            <label class="col-sm-4 col-form-label fw-bold">Role</label>
                            <div class="col-sm-8">
                                <span class="form-control-plaintext">{{ current_user.role.name }}</span>
                            </div>
                        </div>

                        <!-- First Name -->
                        <div class="row mb-2">
                            <label class="col-sm-4 col-form-label fw-bold">First Name</label>
                            <div class="col-sm-8">
                                <span class="form-control-plaintext" id="first_nameText">{{ current_user.first_name }}</span>
                                <input type="text" class="form-control d-none" id="first_nameInput" name="first_name" value="{{ current_user.first_name }}">
                            </div>
                        </div>

                        <!-- Last Name -->
                        <div class="row mb-2">
                            <label class="col-sm-4 col-form-label fw-bold">Last Name</label>
                            <div class="col-sm-8">
                                <span class="form-control-plaintext" id="last_nameText">{{ current_user.last_name }}</span>
                                <input type="text" class="form-control d-none" id="last_nameInput" name="last_name" value="{{ current_user.last_name }}">
                            </div>
                        </div>

                        <!-- Email -->
                        <div class="row mb-2">
                            <label class="col-sm-4 col-form-label fw-bold">Email</label>
                            <div class="col-sm-8">
                                <span class="form-control-plaintext" id="emailText">{{ current_user.email }}</span>
                                <input type="email" class="form-control d-none" id="emailInput" name="email" value="{{ current_user.email }}">
                            </div>
                        </div>

                        <!-- Phone -->
                        <div class="row mb-2">
                            <label class="col-sm-4 col-form-label fw-bold">Phone</label>
                            <div class="col-sm-8">
                                <span class="form-control-plaintext" id="phone_numberText">{{ current_user.phone_number }}</span>
                                <input type="tel" class="form-control d-none" id="phone_numberInput" name="phone_number" value="{{ current_user.phone_number }}">
                            </div>
                        </div>

                        <!-- Address -->
                        <div class="row mb-2">
                            <label class="col-sm-4 col-form-label fw-bold">Address</label>
                            <div class="col-sm-8">
                                <span class="form-control-plaintext" id="addressText">{{ current_user.address }}</span>
                                <input type="text" class="form-control d-none" id="addressInput" name="address" value="{{ current_user.address }}">
                            </div>
                        </div>

                        <!-- City -->
                        <div class="row mb-2">
                            <label class="col-sm-4 col-form-label fw-bold">City</label>
                            <div class="col-sm-8">
                                <span class="form-control-plaintext" id="cityText">{{ current_user.city }}</span>
                                <input type="text" class="form-control d-none" id="cityInput" name="city" value="{{ current_user.city }}">
                            </div>
                        </div>

                        <!-- State -->
                        <div class="row mb-2">
                            <label class="col-sm-4 col-form-label fw-bold">State</label>
                            <div class="col-sm-8">
                                <span class="form-control-plaintext" id="stateText">{{ current_user.state }}</span>
                                <input type="text" class="form-control d-none" id="stateInput" name="state" value="{{ current_user.state }}">
                            </div>
                        </div>

                        <!-- Pincode -->
                        <div class="row mb-2">
                            <label class="col-sm-4 col-form-label fw-bold">Pincode</label>
                            <div class="col-sm-8">
                                <span class="form-control-plaintext" id="pincodeText">{{ current_user.pincode }}</span>
                                <input type="text" class="form-control d-none" id="pincodeInput" name="pincode" value="{{ current_user.pincode }}">
                            </div>
                        </div>

                        <!-- Account Active -->
                        <div class="row mb-2">
                            <label class="col-sm-4 col-form-label fw-bold">Account Active</label>
                            <div class="col-sm-8">
                                <span class="form-control-plaintext" id="statusText">{{ current_user.is_active }}</span>
                            </div>
                        </div>

                        <!-- Joined Date -->
                        <div class="row mb-2">
                            <label class="col-sm-4 col-form-label fw-bold">Joined Date</label>
                            <div class="col-sm-8">
                                <span class="form-control-plaintext" id="joinedText">{{ current_user.created_at|date:'d M Y H:i' }}</span>
                            </div>
                        </div>

                        <!-- Save / Cancel Buttons -->
                        <div class="row mt-4 d-none" id="formButtons">
                            <div class="col-sm-9 offset-sm-3 d-flex justify-content-end">
                                <button type="submit" class="btn btn-primary me-2">
                                    <i class="bi bi-save"></i> Save Changes
                                </button>
                                <button type="button" class="btn btn-outline-secondary" id="cancelEditBtn">Cancel</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>

        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const editBtn = document.getElementById('editProfileBtn');
    const cancelBtn = document.getElementById('cancelEditBtn');
    const formButtons = document.getElementById('formButtons');

    const fields = [
        'first_name', 'last_name', 'email', 'phone_number',
        'address', 'city', 'state', 'pincode'
    ];

    // Show input fields
    editBtn.addEventListener('click', function () {
        fields.forEach(name => {
            document.getElementById(`${name}Text`).classList.add('d-none');
            document.getElementById(`${name}Input`).classList.remove('d-none');
        });
        formButtons.classList.remove('d-none');
        editBtn.classList.add('d-none');
    });

    // Cancel and revert
    cancelBtn.addEventListener('click', function () {
        fields.forEach(name => {
            const textEl = document.getElementById(`${name}Text`);
            const inputEl = document.getElementById(`${name}Input`);
            inputEl.classList.add('d-none');
            textEl.classList.remove('d-none');
            inputEl.value = textEl.textContent.trim();
        });
        formButtons.classList.add('d-none');
        editBtn.classList.remove('d-none');
    });
});
</script>


{% endblock %}